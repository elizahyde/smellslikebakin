/*!CK:1960644339!*//*1392693079,178175255*/

if (self.CavalryLogger) { CavalryLogger.start_js(["NiIte"]); }

__d("LitestandSidebarBookmarksDisplay",["Arbiter","CSS","DOM","Event","LitestandSidebarConfig","LitestandViewportHeight","csx","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={},q={},r={},s={},t,u=false,v=false,w=Infinity,x,y=28,z=32,aa=40,ba=.75,ca=60,da=42,ea=48,fa=51+da;function ga(){if(k.blended_sidebar)return aa;var ja=l.getSize();if(ja===l.SMALL){return y;}else return z;}function ha(){var ja=document.documentElement.clientHeight,ka=(k.right_divebar&&h.hasClass(document.documentElement,'sidebarMode'))||k.blended_sidebar,la;if(!ka){ja-=v?ca:0;la=.5;var ma=k.ratio_config;if(t){if(ja>ma.min_pixel_40_60){la=.4;}else if(ja>ma.min_pixel_45_55)la=.45;}else la=ma.chat_disabled_ratio||ba;}else la=1;var na=ga(),oa;if(k.blended_sidebar){oa=na+ea;}else oa=fa+na-z;var pa=ja*la-oa;return pa-pa%na;}var ia={getVisibleItems:function(){return p;},getHiddenItems:function(){return q;},getTopLevelItems:function(){return r;},setBookmarksOpen:function(ja){u=ja;},getFavorites:function(){return s;},setFavorite:function(ja){s[ja.getAttribute('data-id')]=ja;},display:function(ja,ka,la){ia.display=o;t=la;x=function(){var oa=i.scry(ka,"._4g5p");w=oa.length;var pa=ia.getHeight(),qa=ga(),ra=Math.min(oa.length,Math.floor(pa/qa));if(!u)ja.style.height=pa+'px';p={};q={};r={};for(var sa=0,ta=oa.length;sa<ta;++sa){var ua=oa[sa],va=ua.getAttribute('data-id'),wa=h.hasClass(ua,"_52s3");if(sa<ra)r[va]=ua;if((sa<ra)||wa){h.show(ua);p[va]=ua;}else{h.hide(ua);q[va]=ua;}}g.inform('Sidebar/BookmarksHeightChange');};var ma=function(oa){t=oa;x();},na=function(oa){v=oa;x();};j.listen(window,'resize',x);g.subscribe(['ViewportSizeChange','LitestandCollapsedList/show','LitestandCollapsedList/hide'],x);g.subscribe('chat-visibility/go-online',ma.bind(null,true));g.subscribe('chat-visibility/go-offline',ma.bind(null,false));g.subscribe('LitestandTicker/Visible',na.bind(null,true));g.subscribe('LitestandTicker/notVisible',na.bind(null,false));x();},getHeight:function(){var ja=w;if(k.blended_sidebar&&!k.blended_full_height)ja=Math.min(ja,k.max_blended_bm_items);return Math.min(ha(),ja*ga());},getFullHeight:function(){return fa+ia.getHeight();},update:function(){x();}};e.exports=ia;});
__d("DataGT",[],function(a,b,c,d,e,f){var g={setProperties:function(h,i){var j=h.getAttribute('data-gt')||"{}";try{j=JSON.parse(j);var l=false;for(var m in i){var n=i[m];if(n!==j[m]){j[m]=n;l=true;}}if(l)h.setAttribute('data-gt',JSON.stringify(j));}catch(k){}},setProperty:function(h,i,j){var k={};k[i]=j;g.setProperties(h,k);}};e.exports=g;});