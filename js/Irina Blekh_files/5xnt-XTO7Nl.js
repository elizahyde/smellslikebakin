/*!CK:3745377213!*//*1393209826,178184997*/

if (self.CavalryLogger) { CavalryLogger.start_js(["EhNW7"]); }

__d("mustImplement",["invariant"],function(a,b,c,d,e,f,g){function h(i,j){return function k(){g(false);};}e.exports=h;});
__d("onNodeInsertion",["Arbiter","DOMQuery","Run"],function(a,b,c,d,e,f,g,h,i){function j(k,l,m){if(h.contains(document,k)){l();}else{var n=g.subscribe('reflow',function(){if(h.contains(document,k)){n.unsubscribe();n=null;l();}});if(!m)i.onLeave(function(){if(n){n.unsubscribe();n=null;}});}}e.exports=j;});
__d("Hydrator",[],function(a,b,c,d,e,f){var g={_hydratable:{},hydrate:function(h){var i={},j=this._hydratable[h],k=Array.prototype.slice.call(arguments,1);for(var l in j)i[l]=typeof j[l]==='function'?j[l].apply(this,k):j[l];return i;}};e.exports=g;});
__d("Pretty",[],function(a,b,c,d,e,f){var g={goldenRatio:1.61803,goldenRatioLarge:function(h){return h/this.goldenRatio;},goldenRatioSmall:function(h){return h-h/this.goldenRatio;},decToHex:function(h){return Math.floor(h).toString(16);},formatNumber:function(h){var i=h.toString().split('.');return i[0].replace(/(?=(?:\d{3})+$)(?!^)/g,',')+(i[1]?'.'+i[1]:'');},hexToDec:function(h){return parseInt(h.replace('#',''),16);},interpolate:function(h,i,j,k){var l='';if(j===0){l=h;}else if(j===k-1){l=i;}else{l='#';for(var m=1;m<=6;m+=2){var n=this.hexToDec(h.substr(m,2)),o=this.hexToDec(i.substr(m,2)),p=n+(o-n)*(j/k),q=this.decToHex(p);while(q.length<2)q='0'+q;l+=q;}}return l;},range:function(h,i,j){var k=[];for(var l=0;l<j;l++)k.push(this.interpolate(h,i,l,j));return k;}};e.exports=g;});
__d("SVG",["DOM","copyProperties"],function(a,b,c,d,e,f,g,h){var i='http://www.w3.org/2000/svg',j='1.2',k={create:function(l,m){return this.set(document.createElementNS(i,l),m);},group:function(l,m){var n=this.create('g',m);if(l)g.appendContent(n,l);return n;},path:function(l,m){m.d=l.toString();return this.create('path',m);},circle:function(l,m){h(m,l);return this.create('circle',m);},set:function(l,m){if(m)for(var n in m)l.setAttribute(n,m[n]);return l;},svg:function(l){var m=h({version:j,xmlns:i},l),n=this.create('svg',m);return n;},text:function(l,m){var n=this.create('text',m),o;if(typeof l==='string'){o=document.createTextNode(l);}else o=l;g.appendContent(n,o);return n;}};e.exports=k;});
__d("VizzyBucket",["copyProperties"],function(a,b,c,d,e,f,g){function h(k){return (typeof k==='object')&&(k instanceof j);}function i(k){return k.keys&&k.values;}function j(k,l){"use strict";this._container=l;this.keys=k.keys||[];this.highlighted=k.highlighted;this.values=k.values.map(function(m){return i(m)?new j(m):m;});this.tooltips=k.tooltips||[];}j.prototype.bound=function(k){"use strict";return this.getBounds(k).max;};j.prototype.getAllValues=function(k){"use strict";k||(k=this.getValues());var l=[];k.forEach(function(m){if(typeof m==='object'){l=l.concat(this.getAllValues(m.values||m));}else l.push(m);},this);return l;};j.prototype.getBounds=function(k){"use strict";var l=this.getAllValues(k);return {max:Math.max.apply(null,l),min:Math.min.apply(null,l)};};j.prototype.getLength=function(){"use strict";if(typeof this.values[0]==='object')return i(this.values[0])?this.values[0].getLength():this.values[0].length;return this.values.length;};j.prototype.getPercents=function(){"use strict";var k=this.totalSummary();return this.getSummarizedValues().map(function(l){return Math.round(l/k*100);});};j.prototype.getRawPercents=function(){"use strict";var k=this.totalSummary();return this.getSummarizedValues().map(function(l){return l/k;});};j.prototype.getValues=function(){"use strict";return this.values;};j.prototype.getSummarizedValues=function(){"use strict";return this.values.map(function(k){return h(k)?k.totalSummary():k;});};j.prototype.totalSummary=function(){"use strict";var k=0;for(var l=0;l<this.values.length;l++){var m=this.values[l];k+=h(m)?m.totalSummary():m;}return k;};g(j,{isBucket:h,isBucketSkeleton:i});e.exports=j;});
__d("Vizzy",["DOM","Style","SVG","VizzyBucket","copyProperties","onNodeInsertion"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n,o,p){"use strict";this._bindings=[];this._config=p;this._data=new j(o);this.items=[];this._root=n;l(n,function(){this._dimensions=this.getDimensions();this._canvas=this.createSVGCanvas();if(!this.isChild())g.appendContent(this._root,this.render());}.bind(this));}m.prototype.activate=function(n,o){"use strict";this.activateBindings(n,o);};m.prototype.activateBindings=function(n,o){"use strict";this._bindings.forEach(function(p){p.activate(n,o);});};m.prototype.bind=function(n){"use strict";this._bindings.push(n);};m.prototype.canvasHeight=function(){"use strict";var n=h.get(this._root,'height').replace('px','');return parseInt(n,10);};m.prototype.canvasWidth=function(){"use strict";var n=h.get(this._root,'width').replace('px','');return parseInt(n,10);};m.prototype.contains=function(n){"use strict";return g.contains(this._root,n);};m.prototype.createSVGCanvas=function(){"use strict";return this.isChild()?i.group([],this._dimensions):i.svg(this._dimensions);};m.prototype.deactivate=function(n,o){"use strict";this.deactivateBindings(n,o);};m.prototype.deactivateBindings=function(n,o){"use strict";this._bindings.forEach(function(p){p.deactivate(n,o);});};m.prototype.getData=function(){"use strict";return this._data;};m.prototype.getHovercardProperties=function(n){"use strict";return {};};m.prototype.getItems=function(){"use strict";return this._items;};m.prototype.getDimensions=function(){"use strict";return {height:this.canvasHeight(),width:this.canvasWidth()};};m.prototype.getRoot=function(){"use strict";return this._root;};m.prototype.isChild=function(){"use strict";return false;};m.prototype.render=function(){"use strict";};m.prototype.rerenderBindings=function(n){"use strict";this._bindings.forEach(function(o){o.rerender(n);});};m.prototype.stylize=function(n,o){"use strict";for(var p in o)h.set(n,p,o[p]);return n;};k(m.prototype,{HOVERCARD_ALIGNH:'center',DS_KEY:'vizzy',verticalCenter:4});e.exports=m;});
__d("VizzyHovercardController",["Style","copyProperties","mustImplement"],function(a,b,c,d,e,f,g,h,i){function j(k,l){"use strict";this._chart=k;this._hovercards=l;}j.prototype.performLayout=function(){"use strict";var k=this._hovercards;for(var l=0,m=k.length;l<m;l++){var n=k[l],o=this.getPosition(n);g.apply(n.element,o);}return this;};j.prototype.getMaxHeight=function(){"use strict";var k=this._hovercards,l=[0];for(var m=0,n=k.length;m<n;m++)l[m]=k[m].element.offsetHeight;return Math.max.apply(this,l);};h(j.prototype,{getPosition:i('VizzyHovercardController','getPosition')});e.exports=j;});
__d("VizzyBarHovercardController",["DOMQuery","Vector","VizzyHovercardController","csx"],function(a,b,c,d,e,f,g,h,i,j){for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(){"use strict";if(i!==null)i.apply(this,arguments);}m.prototype.getPosition=function(n){"use strict";var o=this._chart,p=n.element,q=o.bar_wrappers[n.index],r=g.find(q,"._xu"),s=h.getElementPosition(p.offsetParent),t=h.getElementPosition(r.offsetParent),u=t.sub(s),v=u.y+r.offsetHeight+o.getCalloutHeight()+o.keyheight()+o.groupKeyHeight(),w=u.x+r.offsetLeft-(p.offsetWidth-r.offsetWidth)/2;return {left:w+'px',bottom:v+'px'};};e.exports=m;});
__d("VizzyRGB",[],function(a,b,c,d,e,f){var g=['red','green','blue'];function h(k,l,m){"use strict";this.red=Math.floor(k);this.green=Math.floor(l);this.blue=Math.floor(m);}h.prototype.toString=function(){"use strict";var k=this._hexString;if(!k){k='#'+i(this.red)+i(this.green)+i(this.blue);this._hexString=k;}return k;};h.prototype.forEachColor=function(k,l){"use strict";for(var m=0,n=g.length;m<n;m++){var o=g[m];k.call(l||this,o,this[o]);}};function i(k){var l=k.toString(16);while(l.length<2)l='0'+l;return l;}function j(k,l,m){var n={};for(var o=0,p=l,q=g.length;o<q;o++,p+=m){var r=k.substr(p,m);n[g[o]]=parseInt(r,16);}return n;}h.fromHex=function(k){if(k.length!==7)throw new Error('Expect RGB color in the following format: #rrggbb');var l=j(k,1,2);this._hexString=k.toLowerCase();return new h(l.red,l.green,l.blue);};e.exports=h;});
__d("VizzyColorStop",["VizzyRGB"],function(a,b,c,d,e,f,g){function h(k,l){this.index=k;this.color=g.fromHex(l);}function i(k,l,m,n){return k+(l-k)*(m/n);}function j(k,l,m,n){for(var o=m;o<n;o++)k[o]=l;return k;}h.interpolate=function(k,l){if(k.length===0)return [];var m=[],n=k.length,o=k[0];j(m,o.color,0,o.index+1);if(n>1)for(var p=1;p<n;p++){var q=k[p-1],r=k[p],s=q.color,t=r.color,u=q.index,v=r.index,w=v-u+1;for(var x=u,y=0;x<=v;x++,y++){var z=i(s.red,t.red,y,w),aa=i(s.green,t.green,y,w),ba=i(s.blue,t.blue,y,w);m[x]=new g(z,aa,ba);}}var ca=k[n-1];j(m,ca.color,ca.index,l);return m;};e.exports=h;});
__d("VizzyBar",["Animation","DataStore","DOMDimensions","DOM","Event","Hydrator","Parent","Pretty","VizzyBarHovercardController","VizzyBucket","VizzyColorStop","Vizzy","copyProperties","cx","mixin","onNodeInsertion"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=25,x=3000,y=11;function z(ia){if(this._hasChildren)return;var ja=m.byClass(ia.target,"_4ix");if(ja){this.deactivate(h.get(ja.firstChild,r.DS_KEY));var ka=this._data.highlighted;if(ka)this.activate(h.get(this.bar_wrappers[ka].firstChild,r.DS_KEY));}if(!this._data.highlighted){var la=true;for(var ma=ia.toElement;ma&&ma.parentNode;ma=ma.parentNode)if(ma==this.canvas)la=false;if(la)this.deactivate({});}}function aa(ia){if(this._hasChildren)return;var ja=m.byClass(ia.target,"_4ix");if(ja)this.activate(h.get(ja.firstChild,r.DS_KEY));}var ba=u(r.prototype,l);for(var ca in ba)if(ba.hasOwnProperty(ca))ea[ca]=ba[ca];var da=ba===null?null:ba.prototype;ea.prototype=Object.create(da);ea.prototype.constructor=ea;ea.__superConstructor__=ba;function ea(ia,ja,ka,la){"use strict";this._bindings=[];this._onloadCallbacks=[];this._colors=la;this._config=ka;this._currentIndex=null;var ma=this._hovercardController=new o(this,ka.hovercards),na=ka.gradient;if(!na||na.length===0)na=[new q(0,la.getForeground())];if(this._config.equalspacing){this._unflattenedData=ja;ja={keys:[],values:[]};for(var oa=0;oa<this._unflattenedData.values.length;oa++){ja.keys=ja.keys.concat(this._unflattenedData.values[oa].keys);ja.values=ja.values.concat(this._unflattenedData.values[oa].values);}}this._data=new p(ja);this._hasChildren=false;this._root=ia;this.bar_wrappers=[];this._config.barColors=q.interpolate(na,this._data.getLength());v(ia,function(){this._dimensions=this.getDimensions();this.canvas=this.createCanvas();if(this._config.hoverstate){k.listen(this.canvas,'mouseover',aa.bind(this));k.listen(this.canvas,'mouseout',z.bind(this));}j.appendContent(this._root,this.render());this._onloadCallbacks.forEach(function(pa){pa();});ma.performLayout();}.bind(this));}ea.prototype.createBar=function(ia,ja,ka){"use strict";var la;if(this._config.recurse&&p.isBucket(ja)){var ma=s({},this._config,this.hydrate('child',ka)),na={height:this.height(),width:this.colwidth()};la=[new ha(null,ja,ma,this._colors,this,na).render()];if(this._data.keys.length&&!this.isChild())la.push(this.createBarKey(ka));this._hasChildren=true;}else{var oa=null;if(this._config.showvalues){var pa=j.create('span',{className:"_xl"},this.formatValue(ja));pa=this.createCallout(pa,ja);oa=[this.stylize(pa,this.hydrate('value',ja))];}la=[this.stylize(j.create('div',{className:"_xu"},oa),this.hydrate('bar',ja,ka))];if(this._data.keys.length&&!this.isChild())la.push(this.createBarKey(ka));}var qa=this.stylize(j.create('div',{className:"_4ix"},la),this.hydrate('wrapper',ja,ka,ia));h.set(qa.firstChild,r.DS_KEY,{index:ka,value:ja,hasChildren:this._hasChildren});var ra;if(!this._hasChildren&&this._config.links&&this._config.links[ka])ra=j.create('a',{href:this._config.links[ka]},qa);return {bar_wrapper:qa,link:ra};};ea.prototype.createBarKey=function(ia){"use strict";return this.stylize(j.create('div',{className:"_xv"},[this._data.keys[ia]]),this.hydrate('key'));};ea.prototype.createCallout=function(ia,ja){"use strict";var ka=j.create('img',{className:"_4sjy",src:'/images/dialog/arrow_bottom_small.png'}),la=j.create('div',{className:"_4sjx"},[j.create('div',{className:"_4sj-"},j.create('div',{className:"_4sjz"},j.create('div',{className:"_4sj_"},ia))),j.create('div',{className:"_4sk0"},[ka])]);this.stylize(ka,this.hydrate('callout_nub',ja));this.stylize(la,this.hydrate('callout',ja));this._onloadCallbacks.push(function(ma,na){var oa=i.getElementDimensions(ma).width;this.stylize(na,this.hydrate('callout_nub',null,oa));this.stylize(ma,this.hydrate('callout',null,oa));}.bind(this,la,ka));return la;};ea.prototype.createCanvas=function(){"use strict";return j.create('div',{className:"_4iy"});};ea.prototype.bound=function(){"use strict";return this._config.bound?this._config.bound:this._data.bound();};ea.prototype.colwidth=function(){"use strict";var ia=this._data.values.length;return (this._dimensions.width-this.spacing()*(ia-1))/ia;};ea.prototype.height=function(){"use strict";var ia=this._hovercardController,ja=this._dimensions.height-this.keyheight()-this.getCalloutHeight();if(ia)ja-=ia.getMaxHeight();return ja;};ea.prototype.activate=function(ia,ja){"use strict";if(ia.hasChildren||ia.index===this._currentIndex)return;this.deactivate(ia);this._currentIndex=ia.index;this.bar_wrappers.forEach(function(ka,la){if(la===ia.index^this._config.invertedhighlight)this._toggleBarHighlight(ka.firstChild,true);}.bind(this));this.activateBindings(ia,ja);};ea.prototype.deactivate=function(ia,ja){"use strict";this._currentIndex=null;this.bar_wrappers.forEach(function(ka,la){this._toggleBarHighlight(ka.firstChild,false,la);}.bind(this));this.deactivateBindings(ia,ja);};ea.prototype._toggleBarHighlight=function(ia,ja,ka){"use strict";this.stylize(ia,this.hydrate('highlighted_bar',ja,ka));if(ia.firstChild)this.stylize(ia.firstChild,this.hydrate('highlighted_bar_value',ia,ja));};ea.prototype._getValueColor=function(ia,ja){"use strict";var ka=this._colors.getBackground(),la=this._colors.getForeground();return ja?la:ka;};ea.prototype.getCalloutHeight=function(){"use strict";return (this._config.showvalues)?w:0;};ea.prototype.formatValue=function(ia){"use strict";if(ia in this._config.valuesi18n)return this._config.valuesi18n[ia];return n.formatNumber(ia);};ea.prototype.keyheight=function(){"use strict";return this._data.keys.length&&!this.isChild()?y+2*n.goldenRatioSmall(y):0;};ea.prototype.groupKeyHeight=function(){"use strict";return this._data.keys.length?y:0;};ea.prototype.render=function(){"use strict";var ia=(this._config.recurse)?this._data.getValues():this._data.getSummarizedValues(),ja=ia.map(this.createBar.bind(this,ia.length));this.roots=[];if(this._config.equalspacing&&!this.isChild()){var ka=0;for(var la=0;la<this._unflattenedData.keys.length;la++){var ma=j.create('div',{className:"_xw"});for(var na=0;na<this._unflattenedData.values[la].keys.length;na++){var oa=ja[ka++];this.bar_wrappers.push(oa.bar_wrapper);j.appendContent(ma,oa.link?oa.link:oa.bar_wrapper);}j.appendContent(ma,this.stylize(j.create('div',{className:"_4i9b"},[this._unflattenedData.keys[la]]),this.hydrate('group_key',ka-this._unflattenedData.values[la].keys.length)));this.roots.push(ma);}}else ja.forEach(function(sa,ta){if(sa.link){this.roots.push(sa.link);}else this.roots.push(sa.bar_wrapper);this.bar_wrappers.push(sa.bar_wrapper);}.bind(this));var pa=this._config.flashindex;if(pa!==null){var qa=this.bar_wrappers[pa];if(qa){var ra=qa.getElementsByClassName("_xu")[0];if(ra)new g(ra).from('background-color',this._config.flashcolor).to('background-color',this._colors.getForeground()).duration(x).go();}}j.appendContent(this.canvas,this.roots);return this.canvas;};ea.prototype.scale=function(){"use strict";return this.height()/this.bound();};ea.prototype.spacing=function(){"use strict";return this._config.spacing?this._config.spacing:n.goldenRatioSmall(this._dimensions.width/this._data.values.length);};ea.prototype.xoffset=function(){"use strict";return (this._config.xoffset)?this._config.xoffset:0;};s(ea.prototype,{_hydratable:{bar:{backgroundColor:function(ia,ja){return this._data.highlighted===ja?this._colors.getBackground():this._config.barColors[ja].toString();},bottom:function(ia,ja){return Math.round(this.keyheight())+'px';},height:function(ia){return Math.round(this.scale()*ia)+'px';},width:function(){return Math.round(this.colwidth())+'px';}},callout:{left:function(ia,ja){if(ja)return Math.round((this.colwidth()-ja)/2)+'px';var ka=Math.round(Math.max(0,this.formatValue(ia).length-2)*-2.5+(this.colwidth()-23)/2)+'px';return ka;},top:function(){return (-w)+'px';}},callout_nub:{left:function(ia,ja){if(ja)return Math.round(ja/2-4)+'px';var ka=this.formatValue(ia).length;if(ka<=2)return '7px';return Math.round(ka*2+3.5)+'px';}},child:{bound:function(){return this.bound();},showkeys:false},highlighted_bar:{backgroundColor:function(ia,ja){return ia?this._colors.getBackground():this._config.barColors[ja].toString();}},group_key:{left:function(ia){return Math.round((this.colwidth()+this.spacing())*ia+this.xoffset())+'px';},paddingTop:function(){return Math.round(this.keyheight()/2+3)+'px';},width:function(){return Math.round(this.colwidth())+'px';}},highlighted_bar_value:{color:function(ia,ja){var ka=h.get(ia,r.DS_KEY).value;return this._getValueColor(ka,ja);}},key:{height:function(){return Math.round(this.keyheight())+'px';},lineHeight:function(){return Math.round(this.keyheight())+'px';},width:function(){return Math.round(this.colwidth())+'px';}},value:{color:function(ia){return this._getValueColor(ia,false);}},wrapper:{left:function(ia,ja){var ka=(this.colwidth()+this.spacing())*ja+this.xoffset();if(ja>0)ka=ka-Math.floor(this.spacing()/2);return Math.round(ka)+'px';},bottom:function(){if(!this._config.equalspacing)return 0;return Math.round(this.keyheight()/2+2)+'px';},paddingLeft:function(ia,ja){return (!ja?'0':Math.floor(this.spacing()/2))+'px';},paddingRight:function(ia,ja,ka){return (ja<ka-1?Math.ceil(this.spacing()/2):0)+'px';},width:function(){return Math.round(this.colwidth())+'px';}}}});for(var fa in ea)if(ea.hasOwnProperty(fa))ha[fa]=ea[fa];var ga=ea===null?null:ea.prototype;ha.prototype=Object.create(ga);ha.prototype.constructor=ha;ha.__superConstructor__=ea;function ha(ia,ja,ka,la,ma,na){"use strict";this._bindings=[];this._colors=la;this._config=ka;this._container=ma;this._currentIndex=null;this._data=new p(ja);this._dimensions=na;this._hasChildren=false;this._root=ia;this.bar_wrappers=[];this.canvas=this.createCanvas();if(this._config.hoverstate){k.listen(this.canvas,'mouseover',aa.bind(this));k.listen(this.canvas,'mouseout',z.bind(this));}}ha.prototype.isChild=function(){"use strict";return true;};e.exports=ea;});
__d("VizzyColorBase",[],function(a,b,c,d,e,f){function g(h){"use strict";this._colors=h;}g.prototype.getBackground=function(){"use strict";return this._colors[0];};g.prototype.getColors=function(){"use strict";return this._colors;};g.prototype.getForeground=function(){"use strict";return this._colors[this._colors.length-1];};e.exports=g;});
__d("VizzyHovercard",[],function(a,b,c,d,e,f){function g(h,i){this.index=i;this.element=h;}e.exports=g;});