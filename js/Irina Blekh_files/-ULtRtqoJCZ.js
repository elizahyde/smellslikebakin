/*!CK:2920724335!*//*1392692595,178191129*/

if (self.CavalryLogger) { CavalryLogger.start_js(["bKses"]); }

__d("LitestandFilterSwitcherLevels",[],function(a,b,c,d,e,f){var g={TOP_LEVEL:'top',ONE_CLICK:'1',TWO_CLICKS:'2'};e.exports=g;});
__d("LitestandFilterImpressionsLogger",["AsyncRequest","LitestandFilterSwitcherLevels"],function(a,b,c,d,e,f,g,h){var i='/ajax/litestand/filter/impressions',j,k={},l={},m,n,o={init:function(p,q,r,s){n=p;k=q;j=r;m=s;},logExpandedFilterImpressions:function(){o.logFilterImpressions(0,m,h.ONE_CLICK);},logSeeAllFilterImpressions:function(){o.logFilterImpressions(m,j.length,h.TWO_CLICKS);},logFilterImpressions:function(p,q,r){if(l[r])return;l[r]=true;var s=[];for(var t=p;t<q;t++){var u=j[t];if(k[u])continue;k[u]=true;var v=n[u];s.push(v.getAttribute('data-gt'));}g.post(i,{filter_gts:s,level:r});}};e.exports=o;});
__d("LitestandSwitcher",["Arbiter","ArbiterMixin","AsyncRequest","ContextualBlind","CSS","DocumentTitle","DOM","DOMScroll","Event","LitestandFilterImpressionsLogger","LitestandMessages","PageTransitions","React","Run","UIPagelet","XUISpinner.react","copyProperties","csx","cx","ge","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=20,ca,da,ea,fa;function ga(ma,na){n.scrollToTop(false);ca.updateSelected(ea[na]);var oa=m.find(document.body,"._6d_"),pa=m.find(document.body,"._6cn"),qa=oa.childNodes,ra=pa.childNodes;for(var sa=0;sa<qa.length;++sa)k.hide(qa[sa]);for(var ta=0;ta<ra.length;++ta)k.hide(ra[ta]);var ua=m.create('div',{className:"_3ozp"}),va=m.create('div',{className:"_3ozp _5fho"});s.renderComponent(v({size:"large"}),ua);s.renderComponent(v({size:"large"}),va);m.appendContent(oa,ua);m.appendContent(pa,va);k.addClass(pa,"_4_8c");u.loadFromEndpoint('LitestandMainColumnPagelet',m.getID(oa),da[ma],{automatic:true,usePipe:true});u.loadFromEndpoint('LitestandRHCPagelet',m.getID(pa),da[ma],{automatic:true,constHeight:true,usePipe:true});var wa=da[ma].section_title;wa&&l.set(wa,false);}function ha(ma){if(Object.keys(ma.getQueryData()).length||ma.getFragment())return;var na=ma.getPath();for(var oa=0;oa<da.length;oa++)if(da[oa].section_hrefs.indexOf(na)!==-1){g.inform(q.FILTER_SWITCH_BEGIN);ga(oa,da[oa].section_id);return true;}return false;}function ia(ma){var na=m.scry(ma,"._3ozq")[0];na&&m.remove(na);}function ja(ma){for(var na in ea)if(ma==ea[na]&&ea[na].getAttribute('data-removable'))la.removeSection(na);}function ka(ma){var na=[];for(var oa=0;oa<ma.length;oa++)for(var pa in ea)if(ea[pa].getAttribute('data-reorderable')&&ea[pa]==ma[oa])na.push(pa);new i('/ajax/litestand/filter/reorder').setData({section_ids:na}).send();}var la={init:function(ma,na,oa){da=na;ea=oa;la.setNavInstance(ma);if(!fa){r.registerHandler(ha);t.onLeave(function(){ca=null;da=null;ea=null;}.bind(this));}},setNavInstance:function(ma){ca&&ca.destroy();ca=ma;if(!ma)return;la.inform('init',{fancy:ma.fancy},g.BEHAVIOR_STATE);ma.subscribe(['expand','expand_end','expand_all','expand_all_end','collapse','collapse_end','click','collapsed_extra','reset','reorder','remove'],function(na,oa){if(na==='expand'){p.logExpandedFilterImpressions();}else if(na==='expand_all')p.logSeeAllFilterImpressions();if(na==='click')ia(oa.item);if(na==='reorder')ka(oa.sortables);if(na==='remove')ja(oa.item);la.inform(na,oa);});},getRoot:function(){return ca.getRoot();},getNavInstance:function(){return ca;},updateListName:function(ma,na){var oa=ea&&ea[ma];if(oa)m.setContent(m.find(oa,"._18q_"),na);},updateItemCount:function(ma,na){var oa=ea[ma];if(!oa)return;if(na>ba)na=ba+'+';var pa=m.scry(oa,"._3ozq")[0];if(na===0){pa&&m.remove(pa);return;}if(!pa){pa=m.create('div',{className:"_3ozq"});m.insertAfter(m.find(oa,"._c9j"),pa);}m.setContent(pa,na);},showAdditionalItem:function(ma,na){var oa=ea[ma];oa&&ca.showAdditionalInCollapse(oa,na);},reloadSectionNav:function(ma,na){if(!z('pagelet_litestand_section_nav'))return;u.loadFromEndpoint('LitestandSectionNavigationPagelet','pagelet_litestand_section_nav',{current_id:na||null,expanded:!!ma});},registerManageButtons:function(ma,na){var oa=m.scry(ma,"._5c_k")[0],pa=m.scry(ma,"._5c_l")[0];if(oa)o.listen(oa,'click',function(){la.addSection(na);k.hide(oa);pa&&k.show(pa);});if(pa)o.listen(pa,'click',function(){la.removeSection(na);k.hide(pa);oa&&k.show(oa);});},addSection:function(ma){new i('/ajax/litestand/filter/add').setData({section_id:ma}).setHandler(aa(la.reloadSectionNav,true,null)).send();},removeSection:function(ma){new i('/ajax/litestand/filter/remove').setData({section_id:ma}).setHandler(aa(la.reloadSectionNav,true,null)).send();},registerFeedsDialog:function(ma){ca&&ca.hideLoadingDialog();ma.show();j.show(ma,null,true,.7,j.STYLE_DARK);ma.subscribe('hide',function(){g.inform(q.UNLOCK_FILTER_SWITCHER);j.hide();});}};w(la,h);e.exports=la;});
__d("LitestandRHC",["Arbiter","BrowserSupport","CSS","DOM","DOMDimensions","Event","LitestandSwitcher","Run","Style","SubscriptionsHandler","Vector","ViewportBounds","copyProperties","csx","cx","getElementPosition","queryThenMutateDOM","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y=300,z=300,aa=63,ba=61,ca=62,da=38;function ea(ga){this.container=ga;this.root=j.find(ga,"._6c3");this.rhc=j.find(this.root,"._6b-");this.content=j.scry(this.rhc,"._6cn")[0];this.layoutRoot=j.find(document.body,"._li");this.allExpanded=false;this.egoOffsets=[];this.headerFixed=false;this.isFixed=false;this.offset=0;this.rhcTop=0;this._margin=0;this._cacheQueries=this.cacheQueries.bind(this);this._updatePosition=this.updatePosition.bind(this);this.subscriptions=[];this.setup();this.initHandler=new p();this.initHandler.addSubscriptions(m.subscribe('init',function(event,ha){this.fancy=ha.fancy;if(ha.fancy)this.setupFancy();this.header=j.scry(this.root,"._3ozo")[0];this.reset();}.bind(this)));n.onLeave(this.initHandler.release.bind(this.initHandler));g.subscribe('Megaphone/show',this.reset.bind(this));}ea._egoSelectors=["div._5eh2",'div.ego_unit','div.uiHeader'];function fa(ga,ha,ia){if(h.hasCSSTransitions()){i.addClass(ga,"_4-kl");x(function(){o.set(ga,ha,ia);setTimeout(i.removeClass.bind(null,ga,"_4-kl"),y);});}else o.set(ga,ha,ia);}s(ea.prototype,{setupFancy:function(){aa=110;da=85;i.addClass(this.root,"_5hnw");},reset:function(){o.set(this.rhc,'top','');o.set(this.rhc,'margin-top','');o.set(this.rhc,'padding-top','');this.unfix();this.setup();if(this.header){this.unfixHeader();this.setupHeader();}},expand:function(event,ga){i.addClass(this.root,"_5hnx");w(this._cacheQueries,function(){if(this.headerFixed){if(this.fancy){var ha=parseFloat(o.get(this.rhc,'height'));fa(this.rhc,this.isFixed?'top':'margin-top',(-ha)+'px');fa(this.rhc,'opacity',0);}else{var ia=this.offset-da+ga.height;fa(this.rhc,this.isFixed?'top':'margin-top',ia+'px');}o.set(this.rhc,this.isFixed?'margin-top':'top','');var ja=this.getHeaderHeight();o.set(this.rhc,'padding-top',ja+'px');}}.bind(this));},setup:function(){this.cacheQueries();this.cacheSmallViewport();this.cacheViewport();},setupHeader:function(){this.updatePosition();var ga=Math.max(0,k.getElementDimensions(this.header).height-this.getHeaderHeight()-2);this._margin=ga;if(this.headerFixed)if(this.isFixed){o.set(this.rhc,'top',this.offset+ga+'px');}else o.set(this.rhc,'margin-top',ga+'px');this.handler&&this.handler.release();this.handler=new p();this.handler.addSubscriptions(m.subscribe('expand',this.expand.bind(this)),m.subscribe('expand_end',function(event,ha){this._margin=ha.height-da;w(this._cacheQueries.bind(this),this._updatePosition.bind(this));}.bind(this)),m.subscribe('expand_all',function(event,ha){this.expand(event,ha);this._ignorePositioning=true;}.bind(this)),m.subscribe('expand_all_end',function(event,ha){this.rhcTop=this.isFixed?this.layoutRootTop+this.offset-this.viewportTop:0;this._expandedRHCPosition=v(this.rhc).y+22+r.getTop();this._originalRHCMarginTop=this.rhcTop;this._originalLayoutRootTop=this.layoutRootTop;this._margin=ha.height-da;this.minTop=this.layoutRootTop;this.unfixHeader(this.layoutRootTop);this.unfix();o.set(this.rhc,'margin-top',this.rhcTop+'px');}.bind(this)),m.subscribe('collapse',function(event,ha){var ia=this.fancy?ha.animationDuration-z:0;setTimeout(function(){i.removeClass(this.root,"_5hnx");this._ignorePositioning=false;if(this.rhcTop===0){if(this.fancy){var ja=parseFloat(o.get(this.rhc,'height'));o.set(this.rhc,this.isFixed?'top':'margin-top',-ja+'px');fa(this.rhc,'opacity',1);}fa(this.rhc,this.isFixed?'top':'margin-top',this.isFixed?this.offset+'px':'');if(this.header&&this.headerFixed){var ka=this.getHeaderHeight();fa(this.rhc,'padding-top',ka+'px');}}else o.set(this.rhc,this.isFixed?'top':'margin-top',this.isFixed?this.offset+'px':'');if(this.isFixed)o.set(this.rhc,'margin-top','');this._margin=0;this.rhcTop=0;}.bind(this),ia);}.bind(this)),m.subscribe('collapse_end',function(){this.minTop=0;w(this._cacheQueries,this._updatePosition);}.bind(this)),m.subscribe('reset',function(){this._ignorePositioning=false;this.cacheQueries();this.updatePosition();}.bind(this)),m.subscribe('collapsed_extra',function(ha,ia){this._hasAdditionalShown=ia.hasExtra;}.bind(this)));n.onLeave(this.handler.release.bind(this.handler));},contentReplaced:function(){this.content&&i.removeClass(this.content,"_4_8c");w(function(){this.cacheEgoOffsets();this.cacheQueries();j.scry(this.rhc,'img').forEach(function(ga){if(ga.getAttribute('height')||ga.complete||(typeof ga.naturalHeight!=='undefined'&&ga.naturalHeight!==0))return;var ha=l.listen(ga,'load',function(){this.cacheEgoOffsets();this.cacheQueries();this.updatePosition();ha.remove();ia.remove();}.bind(this)),ia=l.listen(ga,'error',function(){ha.remove();ia.remove();});}.bind(this));if(this.header)this._margin=Math.max(0,k.getElementDimensions(this.header).height-this.getHeaderHeight()-2);}.bind(this),function(){this.updatePosition();if(this.header&&this.headerFixed)if(this.isFixed){o.set(this.rhc,'top',this.offset+this._margin+'px');}else o.set(this.rhc,'margin-top',this._margin+'px');}.bind(this));},cacheEgoOffsets:function(){var ga=[];for(var ha=0,ia=ea._egoSelectors.length;ha<ia;ha++)ga=ga.concat(j.scry(this.rhc,ea._egoSelectors[ha]).map(function(ja){return ja.offsetTop+1;}));this.egoOffsets=ga.sort(function(ja,ka){return ja-ka;});},getHeaderHeight:function(){var ga=this.isSmallViewport?ba:aa;if(this._hasAdditionalShown)ga+=ca;return ga;},cacheQueries:function(){this.layoutRootTop=Math.abs(Math.min(v(this.layoutRoot).y,0));this._lastScrollTop=this._scrollTop;this._scrollTop=q.getScrollPosition().y;if(this._ignorePositioning)return;this.rhcHeight=k.getElementDimensions(this.rhc).height;},cacheSmallViewport:function(){this.isSmallViewport=i.hasClass(document.documentElement,"_4vcw");this.collapsedHeaderHeight=this.getHeaderHeight();},cacheViewport:function(){this.isTinyViewport=i.hasClass(document.documentElement,'tinyViewport');this.viewportHeight=q.getViewportDimensions().y;this.viewportTop=r.getTop();this.containerOffset=q.getElementPosition(this.container).y-this.viewportTop;this.topOffset=this.containerOffset+this.viewportTop;},affix:function(ga){if(this.offset===ga&&this.isFixed)return;this.offset=ga;o.set(this.rhc,'top',ga+'px');o.set(this.root,'padding-bottom',this.rhcHeight+'px');if(!this.isFixed){i.removeClass(this.rhc,"_4-kl");i.addClass(this.rhc,'fixed_elem');this.setHasHeaderShadow(false);this.isFixed=true;}},unfix:function(){if(!this.isFixed)return;o.set(this.root,'padding-bottom','');i.removeClass(this.rhc,'fixed_elem');o.set(this.rhc,'top','');this.offset=0;this.isFixed=false;},fixHeader:function(ga){if(this.headerFixed||!this.header)return;i.addClass(this.header,'fixed_elem');o.set(this.rhc,'padding-top',this.collapsedHeaderHeight+'px');o.set(this.header,'top',ga+'px');this.headerFixed=true;},unfixHeader:function(ga){if(!this.headerFixed||!this.header)return;i.removeClass(this.header,'fixed_elem');o.set(this.rhc,'padding-top','');o.set(this.header,'top',(ga||0)+'px');this.headerFixed=false;},setHasHeaderShadow:function(ga){this.header&&i.conditionClass(this.header,"_3ozm",ga);},resize:function(){if(this.isTinyViewport){this.unfixHeader();this.unfix();}else if(this.headerFixed)o.set(this.rhc,'padding-top',this.collapsedHeaderHeight+'px');this.updatePosition();},updatePosition:function(){var ga=this.layoutRootTop;if(this.isTinyViewport)return;if(this._ignorePositioning){if(this.minTop&&ga<this.minTop){if(!this.isFixed&&this._scrollTop<this._lastScrollTop){if(v(this.header).y>=this.viewportTop){this.fixHeader(this.viewportTop);this.affix(this._expandedRHCPosition);o.set(this.rhc,'margin-top','');o.set(this.rhc,'padding-top','');}}else if(this.isFixed&&this._lastScrollTop<this._scrollTop){this.unfixHeader(this.layoutRootTop);this.unfix();o.set(this.rhc,'top','');o.set(this.rhc,'margin-top',(this._originalRHCMarginTop+this.layoutRootTop-this._originalLayoutRootTop)+'px');}}else{this.unfixHeader();this.unfix();}return;}if(ga>=this.containerOffset){this.fixHeader(this.viewportTop);}else this.unfixHeader();this.setHasHeaderShadow(ga>this.containerOffset&&!this.isFixed);if(this._margin)return;if(ga>=this.containerOffset){if(this.rhcHeight+this._margin<this.viewportHeight-this.viewportTop){this.affix(this.viewportTop);return;}var ha=this.viewportHeight-this.rhcHeight,ia=this.viewportTop;for(var ja=0,ka=this.egoOffsets.length;ja<ka;ja++)if(ha>ia-this.egoOffsets[ja]){ha=ia-this.egoOffsets[ja];break;}if(this.topOffset-ga<=ha){this.affix(ha);return;}}this.unfix();}});e.exports=ea;});
__d("LitestandRHCController",["Event","Arbiter","LitestandRHC","Run","debounce","queryThenMutateDOM","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o=[],p=[],q;function r(){if(n)return;var u=l.bind(null,q.cacheQueries.bind(q),q.updatePosition.bind(q),'LitestandRHC/scroll'),v=l.bind(null,q.cacheViewport.bind(q),q.resize.bind(q),'LitestandRHC/resize');o=[g.listen(window,'scroll',m(u)),g.listen(window,'resize',k(v))];p=[h.subscribe('ViewportSizeChange',q.cacheSmallViewport.bind(q)),h.subscribe('Megaphone/show',function(){v();u();}),h.subscribe('netego_loaded',function(){q.contentReplaced();})];j.onLeave(s);n=true;}function s(){o.forEach(function(u){u.remove();});p.forEach(h.unsubscribe);o=[];p=[];q=null;n=false;}var t={registerRHC:function(u){q=new i(u);r();},replaceRHC:function(){q.contentReplaced();}};e.exports=t;});
__d("legacy:LitestandRHCController",["LitestandRHCController"],function(a,b,c,d){a.LitestandRHCController=b('LitestandRHCController');},3);